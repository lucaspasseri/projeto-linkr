{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lucas\\\\Desktop\\\\projetos-react\\\\linkr\\\\src\\\\components\\\\Timeline\\\\CreatePost.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport LocationButton from \"./LocationButton\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CreatePost({\n  getPosts,\n  user\n}) {\n  _s();\n\n  const [url, setUrl] = useState(\"\");\n  const [text, setText] = useState(\"\");\n  const [urlError, setUrlError] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [location, setLocation] = useState(false);\n  const urlInput = useRef();\n  const [avatar, setAvatar] = useState(\"\");\n  useEffect(() => {\n    setAvatar(user ? user.avatar : \"\");\n  }, [user]);\n\n  function publish(e) {\n    e.preventDefault();\n\n    if (!isURL(url)) {\n      setUrlError(true);\n      urlInput.current.focus();\n      return;\n    }\n\n    setIsLoading(true);\n    const body = {\n      text,\n      link: url\n    };\n\n    if (location) {\n      body.geolocation = {};\n      body.geolocation.latitude = location.latitude;\n      body.geolocation.longitude = location.longitude;\n    }\n\n    const config = {\n      headers: {\n        Authorization: `Bearer ${user.token}`\n      }\n    };\n    const createPostRequest = axios.post(\"https://mock-api.bootcamp.respondeai.com.br/api/v2/linkr/posts\", body, config);\n    createPostRequest.then(() => {\n      setUrl(\"\");\n      setText(\"\");\n      setIsLoading(false);\n      getPosts(true);\n    });\n    createPostRequest.catch(() => {\n      alert(\"There was an error publishing your link\");\n      setIsLoading(false);\n    });\n  }\n\n  function isURL(url) {\n    const re = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;\n    return re.test(String(url).toLowerCase());\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(LeftImage, {\n      children: /*#__PURE__*/_jsxDEV(UserImage, {\n        avatar: avatar\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PostForm, {\n      onSubmit: publish,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"What do you want to favorite today?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: url,\n        onChange: e => {\n          setUrlError(false);\n          setUrl(e.target.value);\n        },\n        className: urlError ? \"url-error\" : \"\",\n        placeholder: urlError ? \"Fill in a valid URL\" : \"https://...\",\n        ref: urlInput,\n        disabled: isLoading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: text,\n        onChange: e => setText(e.target.value),\n        placeholder: \"Check out these awesome tips to improve your #javascript\",\n        disabled: isLoading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(LocationButton, {\n          isLoading: isLoading,\n          setLocation: setLocation\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-publish\",\n          disabled: isLoading,\n          children: isLoading ? \"Publishing...\" : \"Publish\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CreatePost, \"l9CzIONoYQiKVYdvFqt7SNcH8q8=\");\n\n_c = CreatePost;\nconst Container = styled.div`\n  display: flex;\n  width: 100%;\n  padding: 20px;\n  background-color: white;\n  color: #707070;\n  box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n  border-radius: 16px;\n  margin-bottom: 30px;\n  @media (max-width: 740px) {\n    padding: 10px 15px;\n    border-radius: 0px;\n  }\n`;\n_c2 = Container;\nconst LeftImage = styled.div`\n  margin-right: 18px;\n  @media (max-width: 740px) {\n    display: none;\n  }\n`;\n_c3 = LeftImage;\nconst UserImage = styled.div`\n  border-radius: 50%;\n  width: 50px;\n  height: 50px;\n  background-image: url(\"${props => props.avatar}\");\n  background-size: cover;\n  background-position: center;\n`;\n_c4 = UserImage;\nconst PostForm = styled.form`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  font-weight: 300;\n  p {\n    height: 40px;\n    width: 100%;\n    font-size: 20px;\n  }\n  input,\n  textarea {\n    padding: 0px 13px;\n    background: #efefef;\n    border-radius: 5px;\n    width: 100%;\n    border: none;\n    display: block;\n    font-size: 15px;\n  }\n  input::placeholder,\n  textarea::placeholder {\n    color: #949494;\n    opacity: 1;\n    font-size: inherit;\n  }\n  input {\n    height: 30px;\n    margin-bottom: 5px;\n  }\n  input.url-error {\n    background-color: #ffdbdb;\n    color: red;\n  }\n  input.url-error::placeholder {\n    color: red;\n  }\n  textarea {\n    padding: 8px 13px;\n    min-height: 66px;\n    margin-bottom: 5px;\n    resize: none;\n  }\n  div {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    .btn-publish {\n      width: 112px;\n      height: 31px;\n      background: #1877f2;\n      border-radius: 5px;\n      border: none;\n      font-weight: bold;\n      font-size: 14px;\n      line-height: 17px;\n      color: white;\n    }\n    .btn-publish:disabled {\n      filter: brightness(0.7);\n    }\n  }\n  @media (max-width: 740px) {\n    p {\n      text-align: center;\n      font-size: 17px;\n    }\n    input,\n    textarea {\n      font-size: 13px;\n    }\n    textarea {\n      min-height: 47px;\n    }\n    div {\n      button {\n        min-width: 112px;\n        height: 22px;\n        font-size: 13px;\n      }\n    }\n  }\n`;\n_c5 = PostForm;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"CreatePost\");\n$RefreshReg$(_c2, \"Container\");\n$RefreshReg$(_c3, \"LeftImage\");\n$RefreshReg$(_c4, \"UserImage\");\n$RefreshReg$(_c5, \"PostForm\");","map":{"version":3,"sources":["C:/Users/lucas/Desktop/projetos-react/linkr/src/components/Timeline/CreatePost.js"],"names":["axios","useEffect","useRef","useState","styled","LocationButton","CreatePost","getPosts","user","url","setUrl","text","setText","urlError","setUrlError","isLoading","setIsLoading","location","setLocation","urlInput","avatar","setAvatar","publish","e","preventDefault","isURL","current","focus","body","link","geolocation","latitude","longitude","config","headers","Authorization","token","createPostRequest","post","then","catch","alert","re","test","String","toLowerCase","target","value","Container","div","LeftImage","UserImage","props","PostForm","form"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport LocationButton from \"./LocationButton\";\r\n\r\nexport default function CreatePost({ getPosts, user }) {\r\n  const [url, setUrl] = useState(\"\");\r\n  const [text, setText] = useState(\"\");\r\n  const [urlError, setUrlError] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [location, setLocation] = useState(false);\r\n  const urlInput = useRef();\r\n  const [avatar, setAvatar] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setAvatar(user ? user.avatar : \"\");\r\n  }, [user]);\r\n\r\n  function publish(e) {\r\n    e.preventDefault();\r\n    if (!isURL(url)) {\r\n      setUrlError(true);\r\n      urlInput.current.focus();\r\n      return;\r\n    }\r\n    setIsLoading(true);\r\n    const body = {\r\n      text,\r\n      link: url,\r\n    };\r\n    if (location) {\r\n      body.geolocation = {};\r\n      body.geolocation.latitude = location.latitude;\r\n      body.geolocation.longitude = location.longitude;\r\n    }\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${user.token}`,\r\n      },\r\n    };\r\n    const createPostRequest = axios.post(\r\n      \"https://mock-api.bootcamp.respondeai.com.br/api/v2/linkr/posts\",\r\n      body,\r\n      config\r\n    );\r\n    createPostRequest.then(() => {\r\n      setUrl(\"\");\r\n      setText(\"\");\r\n      setIsLoading(false);\r\n      getPosts(true);\r\n    });\r\n    createPostRequest.catch(() => {\r\n      alert(\"There was an error publishing your link\");\r\n      setIsLoading(false);\r\n    });\r\n  }\r\n\r\n  function isURL(url) {\r\n    const re =\r\n      /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;\r\n    return re.test(String(url).toLowerCase());\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <LeftImage>\r\n        <UserImage avatar={avatar} />\r\n      </LeftImage>\r\n      <PostForm onSubmit={publish}>\r\n        <p>What do you want to favorite today?</p>\r\n        <input\r\n          value={url}\r\n          onChange={(e) => {\r\n            setUrlError(false);\r\n            setUrl(e.target.value);\r\n          }}\r\n          className={urlError ? \"url-error\" : \"\"}\r\n          placeholder={urlError ? \"Fill in a valid URL\" : \"https://...\"}\r\n          ref={urlInput}\r\n          disabled={isLoading}\r\n        ></input>\r\n        <textarea\r\n          value={text}\r\n          onChange={(e) => setText(e.target.value)}\r\n          placeholder=\"Check out these awesome tips to improve your #javascript\"\r\n          disabled={isLoading}\r\n        ></textarea>\r\n        <div>\r\n          <LocationButton isLoading={isLoading} setLocation={setLocation} />\r\n          <button className=\"btn-publish\" disabled={isLoading}>\r\n            {isLoading ? \"Publishing...\" : \"Publish\"}\r\n          </button>\r\n        </div>\r\n      </PostForm>\r\n    </Container>\r\n  );\r\n}\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  padding: 20px;\r\n  background-color: white;\r\n  color: #707070;\r\n  box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\r\n  border-radius: 16px;\r\n  margin-bottom: 30px;\r\n  @media (max-width: 740px) {\r\n    padding: 10px 15px;\r\n    border-radius: 0px;\r\n  }\r\n`;\r\nconst LeftImage = styled.div`\r\n  margin-right: 18px;\r\n  @media (max-width: 740px) {\r\n    display: none;\r\n  }\r\n`;\r\nconst UserImage = styled.div`\r\n  border-radius: 50%;\r\n  width: 50px;\r\n  height: 50px;\r\n  background-image: url(\"${(props) => props.avatar}\");\r\n  background-size: cover;\r\n  background-position: center;\r\n`;\r\nconst PostForm = styled.form`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  font-weight: 300;\r\n  p {\r\n    height: 40px;\r\n    width: 100%;\r\n    font-size: 20px;\r\n  }\r\n  input,\r\n  textarea {\r\n    padding: 0px 13px;\r\n    background: #efefef;\r\n    border-radius: 5px;\r\n    width: 100%;\r\n    border: none;\r\n    display: block;\r\n    font-size: 15px;\r\n  }\r\n  input::placeholder,\r\n  textarea::placeholder {\r\n    color: #949494;\r\n    opacity: 1;\r\n    font-size: inherit;\r\n  }\r\n  input {\r\n    height: 30px;\r\n    margin-bottom: 5px;\r\n  }\r\n  input.url-error {\r\n    background-color: #ffdbdb;\r\n    color: red;\r\n  }\r\n  input.url-error::placeholder {\r\n    color: red;\r\n  }\r\n  textarea {\r\n    padding: 8px 13px;\r\n    min-height: 66px;\r\n    margin-bottom: 5px;\r\n    resize: none;\r\n  }\r\n  div {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    .btn-publish {\r\n      width: 112px;\r\n      height: 31px;\r\n      background: #1877f2;\r\n      border-radius: 5px;\r\n      border: none;\r\n      font-weight: bold;\r\n      font-size: 14px;\r\n      line-height: 17px;\r\n      color: white;\r\n    }\r\n    .btn-publish:disabled {\r\n      filter: brightness(0.7);\r\n    }\r\n  }\r\n  @media (max-width: 740px) {\r\n    p {\r\n      text-align: center;\r\n      font-size: 17px;\r\n    }\r\n    input,\r\n    textarea {\r\n      font-size: 13px;\r\n    }\r\n    textarea {\r\n      min-height: 47px;\r\n    }\r\n    div {\r\n      button {\r\n        min-width: 112px;\r\n        height: 22px;\r\n        font-size: 13px;\r\n      }\r\n    }\r\n  }\r\n`;\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lucas\\\\Desktop\\\\projetos-react\\\\linkr\\\\src\\\\components\\\\Likes\\\\Likes.js\",\n    _s = $RefreshSig$();\n\nimport styled from \"styled-components\";\nimport axios from \"axios\";\nimport { useState, useContext, useEffect } from \"react\";\nimport { BiHeart } from \"react-icons/bi\";\nimport { FaHeart } from \"react-icons/fa\";\nimport ReactTooltip from \"react-tooltip\";\nimport UserContext from \"../../contexts/UserContexts\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Likes({\n  post\n}) {\n  _s();\n\n  const {\n    user\n  } = useContext(UserContext);\n  const initialLikes = post.likes.map(item => {\n    return {\n      id: item[\"user.id\"],\n      username: item[\"user.username\"]\n    };\n  });\n  const [likes, setLikes] = useState(initialLikes);\n  const [tooltip, setTooltip] = useState(\"\");\n\n  function likeThis() {\n    const config = {\n      headers: {\n        Authorization: `Bearer ${user.token}`\n      }\n    };\n    const request = axios.post(`https://mock-api.bootcamp.respondeai.com.br/api/v2/linkr/posts/${post.id}/like`, {}, config);\n    request.then(response => {\n      const newLikes = response.data.post.likes.map(item => {\n        return {\n          id: item.userId,\n          username: item.username\n        };\n      });\n      setLikes(newLikes);\n    });\n    request.catch(() => alert(\"Error setting likes\"));\n  }\n\n  function dislikeThis() {\n    const config = {\n      headers: {\n        Authorization: `Bearer ${user.token}`\n      }\n    };\n    const request = axios.post(`https://mock-api.bootcamp.respondeai.com.br/api/v2/linkr/posts/${post.id}/dislike`, {}, config);\n    request.then(response => {\n      const newLikes = response.data.post.likes.map(item => {\n        return {\n          id: item.userId,\n          username: item.username\n        };\n      });\n      setLikes(newLikes);\n    });\n    request.catch(() => alert(\"Error setting likes\"));\n  }\n\n  useEffect(() => {\n    getTooltip();\n  }, [likes]);\n\n  function getTooltip() {\n    const notMe = likes.filter(item => item.id !== user.id);\n    const namesNotMine = notMe.map(item => item.username);\n\n    if (likes.filter(item => item.id === user.id).length > 0) {\n      if (namesNotMine.length === 0) {\n        setTooltip(\"You\");\n      }\n\n      if (namesNotMine.length === 1) {\n        setTooltip(\"You and \" + namesNotMine[0]);\n      } else if (namesNotMine.length === 2) {\n        setTooltip(\"You, \" + namesNotMine[0] + \" and another person\");\n      } else if (namesNotMine.length > 2) {\n        setTooltip(\"You, \" + namesNotMine[0] + \" and \" + (likes.length - 2) + \" other people\");\n      }\n    } else {\n      if (namesNotMine.length === 0) {\n        setTooltip(null);\n      }\n\n      if (namesNotMine.length === 1) {\n        setTooltip(namesNotMine[0]);\n      } else if (namesNotMine.length === 2) {\n        setTooltip(namesNotMine[0] + \" e \" + namesNotMine[1]);\n      } else if (namesNotMine.length === 3) {\n        setTooltip(namesNotMine[0] + \", \" + namesNotMine[1] + \", and another person\");\n      } else if (namesNotMine.length > 3) {\n        setTooltip(namesNotMine[0] + \", \" + namesNotMine[1] + \", and \" + (likes.length - 2) + \" other people\");\n      }\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [likes.filter(item => item.id === user.id).length > 0 ? /*#__PURE__*/_jsxDEV(FaHeart, {\n      color: \"red\",\n      onClick: dislikeThis\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(BiHeart, {\n      onClick: likeThis\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(LikesCounter, {\n      \"data-tip\": tooltip,\n      children: [likes.length, \" \", likes.length > 1 ? \"likes\" : \"like\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ReactTooltip, {\n      place: \"bottom\",\n      type: \"light\",\n      effect: \"solid\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Likes, \"8WI0yU9X/jcxvj+OOK+dlXi2YUI=\");\n\n_c = Likes;\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n_c2 = Container;\nconst LikesCounter = styled.div`\n  margin-top: 5px;\n  font-size: 11px;\n  line-height: 13px;\n  color: #fff;\n`;\n_c3 = LikesCounter;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Likes\");\n$RefreshReg$(_c2, \"Container\");\n$RefreshReg$(_c3, \"LikesCounter\");","map":{"version":3,"sources":["C:/Users/lucas/Desktop/projetos-react/linkr/src/components/Likes/Likes.js"],"names":["styled","axios","useState","useContext","useEffect","BiHeart","FaHeart","ReactTooltip","UserContext","Likes","post","user","initialLikes","likes","map","item","id","username","setLikes","tooltip","setTooltip","likeThis","config","headers","Authorization","token","request","then","response","newLikes","data","userId","catch","alert","dislikeThis","getTooltip","notMe","filter","namesNotMine","length","Container","div","LikesCounter"],"mappings":"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","sourcesContent":["import styled from \"styled-components\";\r\nimport axios from \"axios\";\r\nimport { useState, useContext, useEffect } from \"react\";\r\nimport { BiHeart } from \"react-icons/bi\";\r\nimport { FaHeart } from \"react-icons/fa\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport UserContext from \"../../contexts/UserContexts\";\r\nexport default function Likes({ post }) {\r\n\r\n  const { user } = useContext(UserContext);\r\n\r\n  const initialLikes = post.likes.map((item) => {\r\n    return {\r\n      id: item[\"user.id\"],\r\n      username: item[\"user.username\"],\r\n    };    \r\n  });\r\n\r\n  const [likes, setLikes] = useState(initialLikes);\r\n\r\n  const [tooltip, setTooltip] = useState(\"\");\r\n  function likeThis() {\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${user.token}`,\r\n      },\r\n    };\r\n    const request = axios.post(\r\n      `https://mock-api.bootcamp.respondeai.com.br/api/v2/linkr/posts/${post.id}/like`,\r\n      {},\r\n      config\r\n    );\r\n    request.then((response) => {\r\n      const newLikes = response.data.post.likes.map((item) => {\r\n        return {\r\n          id: item.userId,\r\n          username: item.username,\r\n        };\r\n      });\r\n      setLikes(newLikes);\r\n    });\r\n    request.catch(() => alert(\"Error setting likes\"));\r\n  }\r\n  function dislikeThis() {\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${user.token}`,\r\n      },\r\n    };\r\n    const request = axios.post(\r\n      `https://mock-api.bootcamp.respondeai.com.br/api/v2/linkr/posts/${post.id}/dislike`,\r\n      {},\r\n      config\r\n    );\r\n    request.then((response) => {\r\n      const newLikes = response.data.post.likes.map((item) => {\r\n        return {\r\n          id: item.userId,\r\n          username: item.username,\r\n        };\r\n      });\r\n      setLikes(newLikes);\r\n    });\r\n    request.catch(() => alert(\"Error setting likes\"));\r\n  }\r\n\r\n  useEffect(() => {\r\n    getTooltip();\r\n  }, [likes]);\r\n\r\n\r\n  function getTooltip() {\r\n    const notMe = likes.filter((item) => item.id !== user.id);\r\n    const namesNotMine = notMe.map((item) => item.username);\r\n    if (likes.filter((item) => item.id === user.id).length > 0) {\r\n      if (namesNotMine.length === 0) {\r\n        setTooltip(\"You\");\r\n      }\r\n      if (namesNotMine.length === 1) {\r\n        setTooltip(\"You and \" + namesNotMine[0]);\r\n      } else if (namesNotMine.length === 2) {\r\n        setTooltip(\"You, \" + namesNotMine[0] + \" and another person\");\r\n      } else if (namesNotMine.length > 2) {\r\n        setTooltip(\r\n          \"You, \" +\r\n            namesNotMine[0] +\r\n            \" and \" +\r\n            (likes.length - 2) +\r\n            \" other people\"\r\n        );\r\n      }\r\n    } else {\r\n      if (namesNotMine.length === 0) {\r\n        setTooltip(null);\r\n      }\r\n      if (namesNotMine.length === 1) {\r\n        setTooltip(namesNotMine[0]);\r\n      } else if (namesNotMine.length === 2) {\r\n        setTooltip(namesNotMine[0] + \" e \" + namesNotMine[1]);\r\n      } else if (namesNotMine.length === 3) {\r\n        setTooltip(\r\n          namesNotMine[0] + \", \" + namesNotMine[1] + \", and another person\"\r\n        );\r\n      } else if (namesNotMine.length > 3) {\r\n        setTooltip(\r\n          namesNotMine[0] +\r\n            \", \" +\r\n            namesNotMine[1] +\r\n            \", and \" +\r\n            (likes.length - 2) +\r\n            \" other people\"\r\n        );\r\n      }\r\n    }\r\n  }\r\n  return (\r\n    <Container>\r\n      {likes.filter((item) => item.id === user.id).length > 0 ? (\r\n        <FaHeart color=\"red\" onClick={dislikeThis} />\r\n      ) : (\r\n        <BiHeart onClick={likeThis} />\r\n      )}\r\n      <LikesCounter data-tip={tooltip}>\r\n        {likes.length} {likes.length > 1 ? \"likes\" : \"like\"}\r\n      </LikesCounter>\r\n      <ReactTooltip place=\"bottom\" type=\"light\" effect=\"solid\" />\r\n    </Container>\r\n  );\r\n}\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`;\r\nconst LikesCounter = styled.div`\r\n  margin-top: 5px;\r\n  font-size: 11px;\r\n  line-height: 13px;\r\n  color: #fff;\r\n`;\r\n"]},"metadata":{},"sourceType":"module"}
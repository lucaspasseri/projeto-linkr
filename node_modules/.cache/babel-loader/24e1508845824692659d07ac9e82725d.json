{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lucas\\\\Desktop\\\\projetos-react\\\\linkr\\\\src\\\\components\\\\Timeline\\\\DeleteButton.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useState } from \"react\";\nimport { FaTrash } from \"react-icons/fa\";\nimport styled from \"styled-components\";\nimport UserContext from \"../../contexts/UserContexts\";\nimport axios from \"axios\";\nimport Modal from \"react-modal\";\nimport \"./ModalStyle.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nModal.setAppElement(\"#root\");\nexport default function DeleteButton({\n  postId,\n  userId,\n  repost,\n  removePost\n}) {\n  _s();\n\n  const {\n    user\n  } = useContext(UserContext);\n  const [isOpen, setIsOpen] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(false);\n\n  function toggleModal() {\n    setIsOpen(!isOpen);\n  }\n\n  function deletePost() {\n    const config = {\n      headers: {\n        Authorization: `Bearer ${user.token}`\n      }\n    };\n    const deletePostRequest = axios.delete(`https://mock-api.bootcamp.respondeai.com.br/api/v2/linkr/posts/${postId}`, config);\n    setIsLoading(true);\n    deletePostRequest.then(() => {\n      toggleModal();\n      setIsLoading(false);\n      removePost(repost, postId);\n    });\n    deletePostRequest.catch(() => {\n      setError(true);\n      setIsLoading(false);\n    });\n  }\n\n  return userId === user.id ? /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(TrashButton, {\n      onClick: toggleModal,\n      children: /*#__PURE__*/_jsxDEV(FaTrash, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      className: \"content\",\n      overlayClassName: \"overlay\",\n      isOpen: isOpen,\n      onRequestClose: toggleModal,\n      children: /*#__PURE__*/_jsxDEV(ModalContent, {\n        error: error,\n        children: error ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Error: Could not delete your post at this time.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cancel\",\n              onClick: () => {\n                toggleModal();\n                setError(false);\n              },\n              disabled: isLoading,\n              children: \"Ok, go back\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Are you sure you want to delete this post?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cancel\",\n              onClick: toggleModal,\n              disabled: isLoading,\n              children: \"No, go back\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: deletePost,\n              disabled: isLoading,\n              children: isLoading ? \"Deleting...\" : \"Yes, delete it\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), isLoading && /*#__PURE__*/_jsxDEV(Overlay, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true) : \"\";\n}\n\n_s(DeleteButton, \"PloDANM1Mx/kgnUi5r6N15WAHFU=\");\n\n_c = DeleteButton;\nconst TrashButton = styled.button`\n  display: flex;\n  justify-content: flex-end;\n  background-color: transparent;\n  color: white;\n  border: none;\n`;\n_c2 = TrashButton;\nconst ModalContent = styled.div`\n  color: white;\n  p {\n    max-width: 360px;\n    font-weight: bold;\n    font-size: 34px;\n    line-height: 41px;\n    margin-bottom: 47px;\n  }\n  div {\n    display: flex;\n    align-items: center;\n    justify-content: ${props => props.error ? \"center\" : \"space-between\"};\n    padding: 0px 30px;\n    button {\n      width: 134px;\n      height: 37px;\n      border-radius: 5px;\n      font-weight: bold;\n      font-size: 18px;\n      line-height: 22px;\n      border: none;\n      color: #ffffff;\n      background: #1877f2;\n    }\n    button.cancel {\n      background: #ffffff;\n      color: #1877f2;\n    }\n    button:disabled {\n      filter: brightness(0.7);\n    }\n  }\n  @media (max-width: 740px) {\n    border-radius: 16px;\n    p {\n      max-width: 100%;\n      font-size: 24px;\n      margin: 0px 35px 47px;\n    }\n    div {\n      max-width: 360px;\n      margin: 0px auto;\n      button {\n        width: 134px;\n        margin: 0px 5px;\n      }\n    }\n  }\n`;\n_c3 = ModalContent;\nconst Overlay = styled.div`\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color: transparent;\n  z-index: 5;\n`;\n_c4 = Overlay;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"DeleteButton\");\n$RefreshReg$(_c2, \"TrashButton\");\n$RefreshReg$(_c3, \"ModalContent\");\n$RefreshReg$(_c4, \"Overlay\");","map":{"version":3,"sources":["C:/Users/lucas/Desktop/projetos-react/linkr/src/components/Timeline/DeleteButton.js"],"names":["useContext","useState","FaTrash","styled","UserContext","axios","Modal","setAppElement","DeleteButton","postId","userId","repost","removePost","user","isOpen","setIsOpen","isLoading","setIsLoading","error","setError","toggleModal","deletePost","config","headers","Authorization","token","deletePostRequest","delete","then","catch","id","TrashButton","button","ModalContent","div","props","Overlay"],"mappings":";;;AAAA,SAASA,UAAT,EAAqBC,QAArB,QAAqC,OAArC;AACA,SAASC,OAAT,QAAwB,gBAAxB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,WAAP,MAAwB,6BAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAO,kBAAP;;;AAEAA,KAAK,CAACC,aAAN,CAAoB,OAApB;AAEA,eAAe,SAASC,YAAT,CAAsB;AAAEC,EAAAA,MAAF;AAAUC,EAAAA,MAAV;AAAkBC,EAAAA,MAAlB;AAA0BC,EAAAA;AAA1B,CAAtB,EAA8D;AAAA;;AAC3E,QAAM;AAAEC,IAAAA;AAAF,MAAWb,UAAU,CAACI,WAAD,CAA3B;AACA,QAAM,CAACU,MAAD,EAASC,SAAT,IAAsBd,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM,CAACe,SAAD,EAAYC,YAAZ,IAA4BhB,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACiB,KAAD,EAAQC,QAAR,IAAoBlB,QAAQ,CAAC,KAAD,CAAlC;;AAEA,WAASmB,WAAT,GAAuB;AACrBL,IAAAA,SAAS,CAAC,CAACD,MAAF,CAAT;AACD;;AAED,WAASO,UAAT,GAAsB;AACpB,UAAMC,MAAM,GAAG;AACbC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAG,UAASX,IAAI,CAACY,KAAM;AAD7B;AADI,KAAf;AAKA,UAAMC,iBAAiB,GAAGrB,KAAK,CAACsB,MAAN,CACvB,kEAAiElB,MAAO,EADjD,EAExBa,MAFwB,CAA1B;AAIAL,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACAS,IAAAA,iBAAiB,CAACE,IAAlB,CAAuB,MAAM;AAC3BR,MAAAA,WAAW;AACXH,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACAL,MAAAA,UAAU,CAACD,MAAD,EAASF,MAAT,CAAV;AACD,KAJD;AAKAiB,IAAAA,iBAAiB,CAACG,KAAlB,CAAwB,MAAM;AAC5BV,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACAF,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,KAHD;AAID;;AAED,SAAOP,MAAM,KAAKG,IAAI,CAACiB,EAAhB,gBACL;AAAA,4BACE,QAAC,WAAD;AAAa,MAAA,OAAO,EAAEV,WAAtB;AAAA,6BACE,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,eAIE,QAAC,KAAD;AACE,MAAA,SAAS,EAAC,SADZ;AAEE,MAAA,gBAAgB,EAAC,SAFnB;AAGE,MAAA,MAAM,EAAEN,MAHV;AAIE,MAAA,cAAc,EAAEM,WAJlB;AAAA,6BAME,QAAC,YAAD;AAAc,QAAA,KAAK,EAAEF,KAArB;AAAA,kBACGA,KAAK,gBACJ;AAAA,kCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAA,mCACE;AACE,cAAA,SAAS,EAAC,QADZ;AAEE,cAAA,OAAO,EAAE,MAAM;AACbE,gBAAAA,WAAW;AACXD,gBAAAA,QAAQ,CAAC,KAAD,CAAR;AACD,eALH;AAME,cAAA,QAAQ,EAAEH,SANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA,wBADI,gBAiBJ;AAAA,kCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAA,oCACE;AACE,cAAA,SAAS,EAAC,QADZ;AAEE,cAAA,OAAO,EAAEI,WAFX;AAGE,cAAA,QAAQ,EAAEJ,SAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAQE;AAAQ,cAAA,OAAO,EAAEK,UAAjB;AAA6B,cAAA,QAAQ,EAAEL,SAAvC;AAAA,wBACGA,SAAS,GAAG,aAAH,GAAmB;AAD/B;AAAA;AAAA;AAAA;AAAA,oBARF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAlBJ;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,YAJF,EA8CGA,SAAS,iBAAI,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,YA9ChB;AAAA,kBADK,GAkDL,EAlDF;AAoDD;;GApFuBR,Y;;KAAAA,Y;AAsFxB,MAAMuB,WAAW,GAAG5B,MAAM,CAAC6B,MAAO;AAClC;AACA;AACA;AACA;AACA;AACA,CANA;MAAMD,W;AAQN,MAAME,YAAY,GAAG9B,MAAM,CAAC+B,GAAI;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAwBC,KAAD,IAAYA,KAAK,CAACjB,KAAN,GAAc,QAAd,GAAyB,eAAiB;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAjDA;MAAMe,Y;AAkDN,MAAMG,OAAO,GAAGjC,MAAM,CAAC+B,GAAI;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CARA;MAAME,O","sourcesContent":["import { useContext, useState } from \"react\";\r\nimport { FaTrash } from \"react-icons/fa\";\r\nimport styled from \"styled-components\";\r\nimport UserContext from \"../../contexts/UserContexts\";\r\nimport axios from \"axios\";\r\nimport Modal from \"react-modal\";\r\nimport \"./ModalStyle.css\";\r\n\r\nModal.setAppElement(\"#root\");\r\n\r\nexport default function DeleteButton({ postId, userId, repost, removePost }) {\r\n  const { user } = useContext(UserContext);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(false);\r\n\r\n  function toggleModal() {\r\n    setIsOpen(!isOpen);\r\n  }\r\n\r\n  function deletePost() {\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${user.token}`,\r\n      },\r\n    };\r\n    const deletePostRequest = axios.delete(\r\n      `https://mock-api.bootcamp.respondeai.com.br/api/v2/linkr/posts/${postId}`,\r\n      config\r\n    );\r\n    setIsLoading(true);\r\n    deletePostRequest.then(() => {\r\n      toggleModal();\r\n      setIsLoading(false);\r\n      removePost(repost, postId);\r\n    });\r\n    deletePostRequest.catch(() => {\r\n      setError(true);\r\n      setIsLoading(false);\r\n    });\r\n  }\r\n\r\n  return userId === user.id ? (\r\n    <>\r\n      <TrashButton onClick={toggleModal}>\r\n        <FaTrash />\r\n      </TrashButton>\r\n      <Modal\r\n        className=\"content\"\r\n        overlayClassName=\"overlay\"\r\n        isOpen={isOpen}\r\n        onRequestClose={toggleModal}\r\n      >\r\n        <ModalContent error={error}>\r\n          {error ? (\r\n            <>\r\n              <p>Error: Could not delete your post at this time.</p>\r\n              <div>\r\n                <button\r\n                  className=\"cancel\"\r\n                  onClick={() => {\r\n                    toggleModal();\r\n                    setError(false);\r\n                  }}\r\n                  disabled={isLoading}\r\n                >\r\n                  Ok, go back\r\n                </button>\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <p>Are you sure you want to delete this post?</p>\r\n              <div>\r\n                <button\r\n                  className=\"cancel\"\r\n                  onClick={toggleModal}\r\n                  disabled={isLoading}\r\n                >\r\n                  No, go back\r\n                </button>\r\n                <button onClick={deletePost} disabled={isLoading}>\r\n                  {isLoading ? \"Deleting...\" : \"Yes, delete it\"}\r\n                </button>\r\n              </div>\r\n            </>\r\n          )}\r\n        </ModalContent>\r\n      </Modal>\r\n      {isLoading && <Overlay />}\r\n    </>\r\n  ) : (\r\n    \"\"\r\n  );\r\n}\r\n\r\nconst TrashButton = styled.button`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  background-color: transparent;\r\n  color: white;\r\n  border: none;\r\n`;\r\n\r\nconst ModalContent = styled.div`\r\n  color: white;\r\n  p {\r\n    max-width: 360px;\r\n    font-weight: bold;\r\n    font-size: 34px;\r\n    line-height: 41px;\r\n    margin-bottom: 47px;\r\n  }\r\n  div {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: ${(props) => (props.error ? \"center\" : \"space-between\")};\r\n    padding: 0px 30px;\r\n    button {\r\n      width: 134px;\r\n      height: 37px;\r\n      border-radius: 5px;\r\n      font-weight: bold;\r\n      font-size: 18px;\r\n      line-height: 22px;\r\n      border: none;\r\n      color: #ffffff;\r\n      background: #1877f2;\r\n    }\r\n    button.cancel {\r\n      background: #ffffff;\r\n      color: #1877f2;\r\n    }\r\n    button:disabled {\r\n      filter: brightness(0.7);\r\n    }\r\n  }\r\n  @media (max-width: 740px) {\r\n    border-radius: 16px;\r\n    p {\r\n      max-width: 100%;\r\n      font-size: 24px;\r\n      margin: 0px 35px 47px;\r\n    }\r\n    div {\r\n      max-width: 360px;\r\n      margin: 0px auto;\r\n      button {\r\n        width: 134px;\r\n        margin: 0px 5px;\r\n      }\r\n    }\r\n  }\r\n`;\r\nconst Overlay = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background-color: transparent;\r\n  z-index: 5;\r\n`;\r\n"]},"metadata":{},"sourceType":"module"}